{"version":3,"sources":["form.js"],"names":[],"mappings":"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","file":"form-compiled.js","sourcesContent":["/**\n * Created by andreypristupa on 8/28/15.\n */\n\nimport React, { PropTypes } from 'react'\nimport mui from 'material-ui'\n\nlet ThemeManager = new mui.Styles.ThemeManager()\nlet { TextField, Paper, Card, CardHeader, CardText, CardActions, Avatar, RaisedButton, FlatButton } = mui\n\n\nconst minStrLength = 3,\n      maxStrLength = 100\n\nconst restrictedFields = ['errors', 'is_valid']\n\nconst state = {\n  first_name: 'asd',\n  last_name:  'asd',\n  phone:      12345678888,\n  gender:     'man',\n  age:        22,\n  is_valid:   false,\n  errors:     []\n}\n\nconst validationRules = {\n  phone: (phone)  => /^[\\s()+-]*([0-9][\\s()+-]*){10,20}$/.test(phone),\n  age: (age)      => age >= 3 && age <= 100,\n  string: (length)=> length >= minStrLength && length <= maxStrLength\n}\n\nexport default React.createClass ({\n\n  childContextTypes: {\n    muiTheme: React.PropTypes.object\n  },\n\n  getChildContext() {\n    return {\n      muiTheme: ThemeManager.getCurrentTheme()\n    }\n  },\n\n  getInitialState: function() {\n    return state\n  },\n\n  _handleChangeInput(e) {\n    let input = e.target,\n        errors = this.state.errors\n\n    errors[input.id] = \"\"\n\n    if (validationRules[input.id]) {\n      !validationRules[input.id](input.value) ?\n        errors[input.id] = \"Your friend give's you wrong info, please check it. \" : ''\n    } else {\n      !validationRules.string(input.value.length) ?\n        errors[input.id] = \"Incorrect length of field, min: \" + minStrLength + \", max: \" + maxStrLength : ''\n    }\n\n    this.setState({\n      errors: errors,\n      [input.id]: input.value\n    }, () => this._validateForm())\n  },\n\n  _validateForm() {\n    let formData = this._getFormData(),\n        is_valid = true\n\n    for (var key in formData) {\n      if((!formData[key] && formData[key].length == 0) || (this.state.errors[key] && this.state.errors[key].length)) {\n        is_valid = false\n      }\n    }\n\n    this.setState({\n      is_valid: is_valid\n    })\n  },\n\n  _getFormData() {\n    let data = []\n\n    Object.keys(this.state).map(name => {\n      restrictedFields.indexOf(name) == -1 ?\n        data[name] = this.refs[name].getValue() : ''\n    })\n\n    return data\n  },\n\n  _capitalizeFieldName(name) {\n    return (name.charAt(0).toUpperCase() + name.slice(1)).replace(\"_\", \" \")\n  },\n\n  _handleSubmit() {\n    this.props.addNewFriend(this._getFormData())\n    this.setState(this.getInitialState())\n  },\n\n  render() {\n    return (\n      <Card initiallyExpanded={false}>\n        <CardHeader\n          title=\"Add new friend\"\n          subtitle=\"...Image Friend\"\n          avatar={<Avatar style={{color:'red'}}>A</Avatar>}\n          showExpandableButton={true}>\n        </CardHeader>\n        <CardText expandable={true}>\n          <form name=\"form\" id=\"form\">\n            {Object.keys(this.state).map(name => {\n                if(restrictedFields.indexOf(name) == -1) {\n                  return <div className=\"input-control\">\n                    <TextField hintText={this._capitalizeFieldName(name)}\n                               errorText={this.state.errors[name]}\n                               id={name}\n                               key={name}\n                               ref={name}\n                               value={this.state[name]}\n                               onChange={this._handleChangeInput}  />\n                  </div>\n                }\n            }\n            )}\n            <CardActions expandable={true}>\n              <RaisedButton disabled={!this.state.is_valid} onClick={this._handleSubmit} primary={true} label=\"Add new Friend\"/>\n            </CardActions>\n          </form>\n        </CardText>\n      </Card>\n    )\n  }\n})\n"]}